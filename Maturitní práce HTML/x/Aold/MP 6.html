<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FPV Dron Builder</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: #fff;
        }
        header {
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 20px 10px;
            text-align: center;
        }
        main {
            max-width: 1200px;
            margin: 20px auto;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        section {
            margin-bottom: 30px;
        }
        h2 {
            border-bottom: 2px solid #2575fc;
            padding-bottom: 10px;
            color: #333;
        }
        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: space-around;
        }
        .option {
            width: 220px;
            height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            border-radius: 10px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            font-weight: bold;
            cursor: pointer;
            background-size: cover;
            background-position: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .option:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        .option.selected {
            transform: scale(1.1);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            border: 2px solid #2575fc;
        }
        .option span {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            text-align: center;
        }
        #summary {
            margin-top: 30px;
            padding: 20px;
            background: #e0f7fa;
            color: #00695c;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: none;
        }
        #summary h2 {
            color: #004d40;
        }
    </style>
</head>
<body>
    <header>
        <h1>FPV Dron Builder</h1>
        <p>Vyberte komponenty a sledujte, jak bude váš dron vypadat!</p>
    </header>
    <main id="main-content">
        <!-- Sections will be dynamically generated here -->
        <div id="summary">
            <h2>Vaše volby:</h2>
            <ul id="summary-list"></ul>
        </div>
    </main>
    <script>
        const data = {
            "purpose": [
                {"id": "freestyle", "name": "Freestyle", "image": "freestyle.jpg"},
                {"id": "racing", "name": "Racing", "image": "racing.jpg"},
                {"id": "long-range", "name": "Long Range", "image": "long-range.jpg"},
                {"id": "cinematic", "name": "Cinematic", "image": "cinematic.jpg"}
            ],
            "frame": [
                {"id": "true-x", "name": "True-X (Univerzální pro freestyle)", "image": "true-x.jpg"},
                {"id": "h-frame", "name": "H Frame (Rychlostní dron)", "image": "h-frame.jpg"},
                {"id": "deadcat", "name": "Deadcat (Stabilní cinematic)", "image": "deadcat.jpg"}
            ],
            "motors": [
                {"id": "2207", "name": "2207 (Výkonný motor pro větší vrtule a akrobacii)", "image": "2207.jpg"},
                {"id": "2306", "name": "2306 (Efektivní motor pro stabilní let a delší výdrž)", "image": "2306.jpg"},
                {"id": "1507", "name": "1507 (Lehký motor ideální pro dlouhý dolet a menší drony)", "image": "1507.jpg"}
            ],
            "battery": [
                {"id": "4s", "name": "4S (14.8V - Vyšší kontrola a nižší spotřeba)", "image": "4s.jpg"},
                {"id": "6s", "name": "6S (22.2V - Vysoký výkon, delší let)", "image": "6s.jpg"}
            ],
            "esc": [
                {"id": "4in1", "name": "4-in-1 ESC (Kompaktní design)", "image": "4in1.jpg"},
                {"id": "individual", "name": "Samostatné ESC (Lepší chlazení)", "image": "individual.jpg"}
            ],
            "camera": [
                {"id": "analog", "name": "Analog (Nízká latence, nižší kvalita obrazu)", "image": "analog.jpg"},
                {"id": "digital", "name": "Digitální (Vysoké rozlišení, vyšší cena)", "image": "digital.jpg"}
            ]
        };

        const compatibility = {
            "frame": {
                "true-x": ["2207", "2306"],
                "h-frame": ["2207"],
                "deadcat": ["2306", "1507"]
            },
            "battery": {
                "4s": ["2207", "1507"],
                "6s": ["2306"]
            }
        };

        const selections = {};
        const mainContent = document.getElementById("main-content");
        const summary = document.getElementById("summary");
        const summaryList = document.getElementById("summary-list");

        function createSection(sectionName, options) {
            const section = document.createElement("section");
            section.id = sectionName;

            const header = document.createElement("h2");
            header.textContent = `Vyberte ${sectionName}`;
            section.appendChild(header);

            const container = document.createElement("div");
            container.className = "options-container";

            options.forEach(option => {
                const optionDiv = document.createElement("div");
                optionDiv.className = "option";
                optionDiv.style.backgroundImage = `url('${option.image}')`;
                optionDiv.id = `${sectionName}-${option.id}`;
                optionDiv.onclick = () => selectOption(sectionName, option.id);

                const span = document.createElement("span");
                span.textContent = option.name;
                optionDiv.appendChild(span);

                container.appendChild(optionDiv);
            });

            section.appendChild(container);
            mainContent.appendChild(section);
        }

        function selectOption(section, choice) {
            if (selections[section]) {
                const previousSelection = document.getElementById(`${section}-${selections[section]}`);
                previousSelection.classList.remove("selected");
            }

            selections[section] = choice;
            const currentSelection = document.getElementById(`${section}-${choice}`);
            currentSelection.classList.add("selected");

            checkCompatibility();
        }

        function checkCompatibility() {
            if (selections.frame && selections.motors) {
                const validMotors = compatibility.frame[selections.frame];
                if (!validMotors.includes(selections.motors)) {
                    alert("Motory nejsou kompatibilní s vybraným rámem!");
                    return;
                }
            }

            if (selections.battery && selections.motors) {
                const validBatteries = compatibility.battery[selections.battery];
                if (!validBatteries.includes(selections.motors)) {
                    alert("Baterie není kompatibilní s vybranými motory!");
                    return;
                }
            }

            if (Object.keys(data).every(section => selections[section])) {
                showSummary();
            }
        }

        function showSummary() {
            summaryList.innerHTML = "";
            Object.keys(selections).forEach(section => {
                const listItem = document.createElement("li");
                listItem.textContent = `${section}: ${data[section].find(option => option.id === selections[section]).name}`;
                summaryList.appendChild(listItem);
            });
            summary.style.display = "block";
        }

        Object.keys(data).forEach(section => {
            createSection(section, data[section]);
        });
    </script>
</body>
</html>
